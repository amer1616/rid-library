<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RID - Prop Validation Example</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
        font-family: system-ui, -apple-system, sans-serif;
        color: #333;
      }

      /* Console output styling */
      .console {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        max-height: 200px;
        overflow-y: auto;
        background: #1e1e1e;
        color: #fff;
        font-family: monospace;
        padding: 10px;
        font-size: 14px;
        transform: translateY(100%);
        transition: transform 0.3s ease;
      }

      .console.show {
        transform: translateY(0);
      }

      .console-entry {
        margin: 5px 0;
        padding: 5px;
        border-radius: 4px;
      }

      .console-entry.warn {
        color: #ffd700;
        background: rgba(255, 215, 0, 0.1);
      }

      .console-entry.error {
        color: #ff4444;
        background: rgba(255, 68, 68, 0.1);
      }

      .console-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 8px 16px;
        background: #333;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        z-index: 1000;
      }
    </style>
  </head>
  <body>
    <!-- Our demo component -->
    <validation-demo></validation-demo>

    <!-- Console output for validation warnings -->
    <button class="console-toggle" onclick="toggleConsole()">
      Show Console
    </button>
    <div id="console" class="console"></div>

    <script type="module">
      import "./main.ts";

      // Override console.warn to show in our custom console
      const originalWarn = console.warn;
      console.warn = (...args) => {
        originalWarn.apply(console, args);

        const consoleDiv = document.getElementById("console");
        const entry = document.createElement("div");
        entry.className = "console-entry warn";
        entry.textContent = args.join(" ");
        consoleDiv.appendChild(entry);

        // Auto-scroll to bottom
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
      };

      // Also catch errors
      window.addEventListener("error", (event) => {
        const consoleDiv = document.getElementById("console");
        const entry = document.createElement("div");
        entry.className = "console-entry error";
        entry.textContent = event.error?.message || event.message;
        consoleDiv.appendChild(entry);
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
      });
    </script>

    <script>
      // Toggle console visibility
      function toggleConsole() {
        const consoleDiv = document.getElementById("console");
        consoleDiv.classList.toggle("show");

        const button = document.querySelector(".console-toggle");
        button.textContent = consoleDiv.classList.contains("show")
          ? "Hide Console"
          : "Show Console";
      }
    </script>
  </body>
</html>
